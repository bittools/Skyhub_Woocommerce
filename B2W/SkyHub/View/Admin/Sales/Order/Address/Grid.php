<?php
/**
 * BSeller - B2W Companhia Digital
 *
 * DISCLAIMER
 *
 * Do not edit this file if you want to update this module for future new versions.
 *
 * @copyright     Copyright (c) 2017 B2W Companhia Digital. (http://www.bseller.com.br/)
 * @author        Luiz Tucillo <luiz.tucillo@e-smart.com.br>
 */

namespace B2W\SkyHub\View\Admin\Sales\Order\Address;

use B2W\SkyHub\Model\Sales\Order\Address\Map;
use B2W\SkyHub\View\Admin\Admin;
use B2W\SkyHub\View\Admin\GridAbstract;

/**
 * Class Attribute
 * @package B2W\SkyHub\View\Admin\Catalog\Product
 */
class Grid extends GridAbstract
{
    /**
     * @return mixed|void
     */
    protected function _loadItems()
    {
        $attributes = \App::config('map/sales/order/address');
        $result     = array();
        $map        = new Map();

        foreach ($attributes as $attr) {

            $href           = admin_url() . 'admin.php?page=' . Admin::SLUG_SALES_ORDER_ADDRESS_ATTRIBUTE_EDIT
                . '&attribute=' . $attr['code'];

            $wcomContent    = $map->attribute($attr['code']) . '<br /><a href="'.$href.'">'
                . __('edit', Admin::DOMAIN) . '</a>';

            $result[]           = array(
                self::COLUMN_SKYHUB_CODE    => isset($attr['code']) ? $attr['code'] : '',
                self::COLUMN_LOCAL_CODE     => $wcomContent,
                self::COLUMN_SKYHUB_NAME    => isset($attr['label']) ? $attr['label'] : '',
                self::COLUMN_DESCRIPTION    => isset($attr['description']) ? $attr['description'] : '',
            );
        }

        $this->items = $result;
    }
}
